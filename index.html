<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KIMO SHOP | Cloud Edition</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <style>
        :root { --blue: #00d2ff; --pink: #bc13fe; --glass: rgba(255, 255, 255, 0.05); }
        body { margin: 0; background: #050508; color: white; font-family: sans-serif; background-size: cover; background-position: center; background-attachment: fixed; }
        #loader { position: fixed; width: 100%; height: 100vh; background: #000; display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999; }
        .page { display: none; padding: 20px; max-width: 800px; margin: auto; }
        .active-page { display: block; }
        header { display: flex; align-items: center; justify-content: center; margin-bottom: 30px; position: relative; padding-top: 20px; }
        .back-btn { position: absolute; left: 0; background: var(--glass); border: 1px solid #333; color: white; padding: 8px; border-radius: 10px; cursor: pointer; }
        .k-logo { width: 60px; height: 60px; border-radius: 15px; border: 2px solid var(--blue); overflow: hidden; }
        .k-logo img { width: 100%; height: 100%; object-fit: cover; }
        .shop-title { margin-left: 15px; font-size: 24px; font-weight: bold; cursor: pointer; }
        
        /* Slider */
        .slider-container { width: 100%; aspect-ratio: 16/9; border-radius: 20px; overflow: hidden; margin-bottom: 30px; border: 1px solid #333; }
        .slides { display: flex; width: 300%; height: 100%; transition: 0.8s; }
        .slide { width: 100%; height: 100%; background-size: cover; background-position: center; }

        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .card { background: var(--glass); border: 1px solid #222; padding: 20px; border-radius: 20px; text-align: center; cursor: pointer; }
        .buy-btn { width: 100%; background: linear-gradient(90deg, var(--blue), var(--pink)); border: none; color: white; padding: 12px; border-radius: 50px; font-weight: bold; margin-top: 10px; cursor: pointer; }
        
        .admin-input { width: 100%; padding: 12px; margin-bottom: 10px; background: #111; border: 1px solid #333; color: white; border-radius: 10px; box-sizing: border-box; }
        .price-row { display: flex; gap: 5px; margin-bottom: 5px; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 2000; padding: 20px; overflow-y: auto; }
    </style>
</head>
<body>

<div id="loader"><h2>KIMO SHOP</h2><p>Syncing Data...</p></div>

<div id="main-page" class="page active-page">
    <header>
        <div class="k-logo"><img id="display-logo" src="https://placehold.co/100x100?text=LOGO"></div>
        <div class="shop-title" onclick="secretAdmin()">KIMO SHOP</div>
    </header>

    <div class="slider-container">
        <div class="slides" id="slide-track">
            <div id="s0" class="slide" style="background-image:url('https://placehold.co/600x400?text=Slide1')"></div>
            <div id="s1" class="slide" style="background-image:url('https://placehold.co/600x400?text=Slide2')"></div>
            <div id="s2" class="slide" style="background-image:url('https://placehold.co/600x400?text=Slide3')"></div>
        </div>
    </div>

    <div class="grid">
        <div class="card" onclick="nav('mlbb-page')"><h3>MLBB</h3><button class="buy-btn">BUY</button></div>
        <div class="card" onclick="nav('pubg-page')"><h3>PUBG</h3><button class="buy-btn">BUY</button></div>
    </div>
    <button class="buy-btn" style="margin-top:20px;" onclick="nav('acc-page')">VIEW ACCOUNT SHOP</button>
</div>

<div id="mlbb-page" class="page">
    <header><button class="back-btn" onclick="nav('main-page')">BACK</button><div class="shop-title">MLBB</div></header>
    <div id="mlbb-prices"></div>
</div>

<div id="acc-page" class="page">
    <header><button class="back-btn" onclick="nav('main-page')">BACK</button><div class="shop-title">ACCOUNTS</div></header>
    <div id="acc-list"></div>
</div>

<div id="admin-page" class="page">
    <header><div class="shop-title">ADMIN PANEL</div></header>
    <h3>Visuals & Payment</h3>
    <input type="text" id="adm-logo" class="admin-input" placeholder="Logo Link">
    <input type="text" id="adm-bg" class="admin-input" placeholder="Background Link">
    <input type="text" id="adm-p1" class="admin-input" placeholder="KPay Number">
    
    <h3>Slide Images (3 Pdfs)</h3>
    <input type="text" id="adm-s0" class="admin-input" placeholder="Slide 1 Image Link">
    <input type="text" id="adm-s1" class="admin-input" placeholder="Slide 2 Image Link">
    <input type="text" id="adm-s2" class="admin-input" placeholder="Slide 3 Image Link">

    <h3>Edit MLBB Prices</h3>
    <div id="mlbb-edit-area"></div>
    <button onclick="addPriceItem('mlbb')" class="buy-btn" style="background:#333">+ Add Row</button>

    <button class="buy-btn" style="background:green; margin-top:30px;" onclick="saveCloud()">SAVE ALL TO CLOUD</button>
    <button class="buy-btn" style="background:#444;" onclick="nav('main-page')">EXIT</button>
</div>

<script>
    const firebaseConfig = {
        apiKey: "AIzaSyBdMz4xg9QR7hNEp8e7AV_zWW21gwm50kM",
        authDomain: "kimo-shop-89951.firebaseapp.com",
        databaseURL: "https://kimo-shop-89951-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "kimo-shop-89951",
        storageBucket: "kimo-shop-89951.firebasestorage.app",
        messagingSenderId: "802336427242",
        appId: "1:802336427242:web:df6c687fa93fb5c4ce1b93"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database().ref('kimo_data_v2');

    let kData = {
        logo: '', bg: '', p1: '',
        s0: '', s1: '', s2: '',
        mlbb: [{name: '86 Diamonds', price: '2500'}],
        accs: []
    };

    // Firebase Sync
    db.on('value', (snap) => {
        if(snap.val()) kData = snap.val();
        renderUI();
        document.getElementById('loader').style.display = 'none';
    }, (err) => {
        console.log(err);
        document.getElementById('loader').innerHTML = "Check Database Rules!";
    });

    function renderUI() {
        if(kData.logo) document.getElementById('display-logo').src = kData.logo;
        if(kData.bg) document.body.style.backgroundImage = `url('${kData.bg}')`;
        if(kData.s0) document.getElementById('s0').style.backgroundImage = `url('${kData.s0}')`;
        if(kData.s1) document.getElementById('s1').style.backgroundImage = `url('${kData.s1}')`;
        if(kData.s2) document.getElementById('s2').style.backgroundImage = `url('${kData.s2}')`;

        const mlbbArea = document.getElementById('mlbb-prices');
        mlbbArea.innerHTML = kData.mlbb.map(i => `
            <div style="display:flex; justify-content:space-between; padding:15px; background:var(--glass); margin-bottom:10px; border-radius:15px;">
                <span>${i.name}</span>
                <b style="color:var(--blue)">${i.price} MMK</b>
            </div>
        `).join('');
    }

    // Admin Logic
    let clicks = 0;
    function secretAdmin() {
        clicks++;
        if(clicks >= 5) { nav('admin-page'); loadAdmin(); clicks = 0; }
        setTimeout(() => clicks = 0, 2000);
    }

    function loadAdmin() {
        document.getElementById('adm-logo').value = kData.logo || '';
        document.getElementById('adm-bg').value = kData.bg || '';
        document.getElementById('adm-p1').value = kData.p1 || '';
        document.getElementById('adm-s0').value = kData.s0 || '';
        document.getElementById('adm-s1').value = kData.s1 || '';
        document.getElementById('adm-s2').value = kData.s2 || '';
        renderEditPrices();
    }

    function renderEditPrices() {
        document.getElementById('mlbb-edit-area').innerHTML = kData.mlbb.map((i, idx) => `
            <div class="price-row">
                <input class="admin-input" value="${i.name}" onchange="kData.mlbb[${idx}].name=this.value">
                <input class="admin-input" value="${i.price}" onchange="kData.mlbb[${idx}].price=this.value">
                <button onclick="kData.mlbb.splice(${idx},1); renderEditPrices()" style="background:red; border:none; color:white; border-radius:5px;">X</button>
            </div>
        `).join('');
    }

    function addPriceItem(cat) {
        kData[cat].push({name: 'New Item', price: '0'});
        renderEditPrices();
    }

    function saveCloud() {
        kData.logo = document.getElementById('adm-logo').value;
        kData.bg = document.getElementById('adm-bg').value;
        kData.p1 = document.getElementById('adm-p1').value;
        kData.s0 = document.getElementById('adm-s0').value;
        kData.s1 = document.getElementById('adm-s1').value;
        kData.s2 = document.getElementById('adm-s2').value;

        db.set(kData).then(() => alert("Cloud Synced!"));
    }

    function nav(id) {
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active-page'));
        document.getElementById(id).classList.add('active-page');
    }

    // Auto Slider
    let curS = 0;
    setInterval(() => {
        curS = (curS + 1) % 3;
        document.getElementById('slide-track').style.transform = `translateX(-${curS * 33.33}%)`;
    }, 3000);
</script>
</body>
</html>

